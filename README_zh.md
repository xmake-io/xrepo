<div align="center">
  <a href="https://xmake.io">
    <img width="160" heigth="160" src="https://tboox.org/static/img/xmake/logo256c.png">
  </a>

  <h1>xrepo</h1>

  <div>
    <a href="https://www.reddit.com/r/xmake/">
      <img src="https://img.shields.io/badge/chat-on%20reddit-ff3f34.svg?style=flat-square" alt="Reddit" />
    </a>
    <a href="https://gitter.im/xmake-io/xmake?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge">
      <img src="https://img.shields.io/gitter/room/xmake-io/xmake.svg?style=flat-square&colorB=96c312" alt="Gitter" />
    </a>
    <a href="https://t.me/tbooxorg">
      <img src="https://img.shields.io/badge/chat-on%20telegram-blue.svg?style=flat-square" alt="Telegram" />
    </a>
    <a href="https://jq.qq.com/?_wv=1027&k=5hpwWFv">
      <img src="https://img.shields.io/badge/chat-on%20QQ-ff69b4.svg?style=flat-square" alt="QQ" />
    </a>
    <a href="https://github.com/xmake-io/xrepo/blob/master/LICENSE.md">
      <img src="https://img.shields.io/github/license/xmake-io/xrepo.svg?colorB=f48041&style=flat-square" alt="license" />
    </a>
    <a href="https://xmake.io/#/about/sponsor">
      <img src="https://img.shields.io/badge/donate-us-orange.svg?style=flat-square" alt="Donate" />
    </a>
  </div>

  <p>ä¸€ä¸ªåŸºäº Xmake çš„è·¨å¹³å° C/C++ åŒ…ç®¡ç†å™¨</p>
</div>

## é¡¹ç›®æ”¯æŒ

é€šè¿‡æˆä¸ºèµåŠ©è€…æ¥æ”¯æŒè¯¥é¡¹ç›®ã€‚æ‚¨çš„logoå°†æ˜¾ç¤ºåœ¨æ­¤å¤„ï¼Œå¹¶å¸¦æœ‰æŒ‡å‘æ‚¨ç½‘ç«™çš„é“¾æ¥ã€‚ğŸ™ [[æˆä¸ºèµåŠ©å•†](https://xmake.io/#/zh-cn/about/sponsor)]

<a href="https://opencollective.com/xmake#backers" target="_blank"><img src="https://opencollective.com/xmake/backers.svg?width=890"></a>

## ç®€ä»‹

xrepo æ˜¯ä¸€ä¸ªåŸºäº [Xmake](https://github.com/xmake-io/xmake) çš„è·¨å¹³å° C/C++ åŒ…ç®¡ç†å™¨ã€‚

å®ƒåŸºäº xmake æä¾›çš„è¿è¡Œæ—¶ï¼Œä½†å´æ˜¯ä¸€ä¸ªå®Œæ•´ç‹¬ç«‹çš„åŒ…ç®¡ç†ç¨‹åºï¼Œç›¸æ¯” vcpkg/homebrew æ­¤ç±»åŒ…ç®¡ç†å™¨ï¼Œxrepo èƒ½å¤ŸåŒæ—¶æä¾›æ›´å¤šå¹³å°å’Œæ¶æ„çš„ C/C++ åŒ…ã€‚

å¹¶ä¸”è¿˜æ”¯æŒå¤šç‰ˆæœ¬è¯­ä¹‰é€‰æ‹©ï¼Œå¦å¤–å®ƒè¿˜æ˜¯ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„åˆ†å¸ƒå¼ä»“åº“ï¼Œä¸ä»…ä»…æä¾›äº†å®˜æ–¹çš„ [xmake-repo](https://github.com/xmake-io/xmake-repo) ä»“åº“ï¼Œè¿˜æ”¯æŒç”¨æˆ·è‡ªå»ºå¤šä¸ªç§æœ‰ä»“åº“ã€‚

åŒæ—¶ï¼Œxrepo ä¹Ÿæ”¯æŒä» vcpkg/homebrew/conan ç­‰ç¬¬ä¸‰æ–¹åŒ…ç®¡ç†å™¨ä¸­å®‰è£…åŒ…ï¼Œå¹¶æä¾›ç»Ÿä¸€ä¸€è‡´çš„åº“é“¾æ¥ä¿¡æ¯ï¼Œæ–¹ä¾¿ä¸ç¬¬ä¸‰æ–¹é¡¹ç›®çš„é›†æˆå¯¹æ¥ã€‚

å¦‚æœä½ æƒ³è¦äº†è§£æ›´å¤šï¼Œè¯·å‚è€ƒï¼š[åœ¨çº¿æ–‡æ¡£](https://xrepo.xmake.io/#/zh-cn/getting_started), [Github](https://github.com/xmake-io/xrepo) ä»¥åŠ [Gitee](https://gitee.com/tboox/xrepo)

![](https://xrepo.xmake.io/assets/img/xrepo.gif)

## å®‰è£…

æˆ‘ä»¬åªéœ€è¦å®‰è£…ä¸Š xmake å°±å¯ä»¥ä½¿ç”¨ xrepo å‘½ä»¤ï¼Œå…³äº xmake çš„å®‰è£…ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ï¼š[xmake å®‰è£…æ–‡æ¡£](https://xmake.io/#/zh-cn/guide/installation)ã€‚

## æ”¯æŒå¹³å°

* Windows (x86, x64)
* macOS (i386, x86_64, arm64)
* Linux (i386, x86_64, cross-toolchains ..)
* *BSD (i386, x86_64)
* Android (x86, x86_64, armeabi, armeabi-v7a, arm64-v8a)
* iOS (armv7, armv7s, arm64, i386, x86_64)
* MSYS (i386, x86_64)
* MinGW (i386, x86_64, arm, arm64)
* Cross Toolchains

## æ”¯æŒçš„åŒ…ç®¡ç†ä»“åº“

* å®˜æ–¹è‡ªå»ºä»“åº“ [xmake-repo](https://github.com/xmake-io/xmake-repo) (tbox >1.6.1)
* [ç”¨æˆ·è‡ªå»ºä»“åº“](https://xmake.io/#/zh-cn/package/remote_package?id=%e4%bd%bf%e7%94%a8%e8%87%aa%e5%bb%ba%e7%a7%81%e6%9c%89%e5%8c%85%e4%bb%93%e5%ba%93)
* Conan (conan::openssl/1.1.1g)
* Vcpkg (vcpkg:ffmpeg)
* Homebrew/Linuxbrew (brew::pcre2/libpcre2-8)
* Pacman on archlinux/msys2 (pacman::libcurl)
* Clib (clib::clibs/bytes@0.0.4)
* Dub (dub::log 0.4.3)

## åˆ†å¸ƒå¼ä»“åº“æ”¯æŒ

é™¤äº†å¯ä»¥ç›´æ¥ä»å®˜æ–¹ä»“åº“ï¼š[xmake-repo](https://github.com/xmake-io/xmake-repo) æ£€ç´¢å®‰è£…åŒ…ä¹‹å¤–ï¼Œ
æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ ä»»æ„å¤šä¸ªè‡ªå»ºçš„ä»“åº“ï¼Œç”šè‡³å¯ä»¥å®Œå…¨éš”ç¦»å¤–ç½‘ï¼Œä»…ä»…åœ¨å…¬å¸å†…éƒ¨ç½‘ç»œç»´æŠ¤ç§æœ‰åŒ…çš„å®‰è£…é›†æˆã€‚

åªéœ€è¦é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ï¼Œæ·»åŠ ä¸Šè‡ªå·±çš„ä»“åº“åœ°å€ï¼š

```console
$ xrepo add-repo myrepo https://github.com/mygroup/myrepo
```

## ä¸ xmake çš„å·¥ç¨‹æ— ç¼é›†æˆ

```lua
add_requires("tbox >1.6.1", "libuv master", "vcpkg::ffmpeg", "brew::pcre2/libpcre2-8")
add_requires("conan::openssl/1.1.1g", {alias = "openssl", optional = true, debug = true})
target("test")
    set_kind("binary")
    add_files("src/*.c")
    add_packages("tbox", "libuv", "vcpkg::ffmpeg", "brew::pcre2/libpcre2-8", "openssl")
```

ä¸‹é¢æ˜¯ä¸ xmake é›†æˆçš„æ•´ä½“æ¶æ„å’Œç¼–è¯‘æµç¨‹ã€‚

<img src="https://xmake.io/assets/img/index/package_arch.png" width="650px" />

## å¿«é€Ÿä¸Šæ‰‹

### å®‰è£…åŒ…

#### åŸºæœ¬ä½¿ç”¨

```console
$ xrepo install zlib tbox
```

#### å®‰è£…æŒ‡å®šç‰ˆæœ¬åŒ…

å®Œæ•´æ”¯æŒ Semantic Versioning (è¯­ä¹‰ç‰ˆæœ¬)ã€‚

```console
$ xrepo install "zlib 1.2.x"
$ xrepo install "zlib >=1.2.0"
```

#### å®‰è£…æŒ‡å®šå¹³å°åŒ…

```console
$ xrepo install -p iphoneos -a arm64 zlib
$ xrepo install -p android [--ndk=/xxx] zlib
$ xrepo install -p mingw [--mingw=/xxx] zlib
$ xrepo install -p cross --sdk=/xxx/arm-linux-musleabi-cross zlib
```

#### å®‰è£…è°ƒè¯•ç‰ˆæœ¬åŒ…

```console
$ xrepo install -m debug zlib
```

#### å®‰è£…åŠ¨æ€åº“ç‰ˆæœ¬åŒ…

```console
$ xrepo install -k shared zlib
```

#### å®‰è£…æŒ‡å®šé…ç½®åŒ…

```console
$ xrepo install -f "vs_runtime=MD" zlib
$ xrepo install -f "regex=true,thread=true" boost
```

#### å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ç®¡ç†å™¨çš„åŒ…

```console
$ xrepo install brew::zlib
$ xrepo install vcpkg::zlib
$ xrepo install conan::zlib/1.2.11
$ xrepo install pacman:libpng
$ xrepo install dub:log
```

### æŸ¥æ‰¾åŒ…çš„åº“ä½¿ç”¨ä¿¡æ¯

```console
$ xrepo fetch pcre2
{
  {
    linkdirs = {
      "/usr/local/Cellar/pcre2/10.33/lib"
    },
    links = {
      "pcre2-8"
    },
    defines = {
      "PCRE2_CODE_UNIT_WIDTH=8"
    },
    includedirs = "/usr/local/Cellar/pcre2/10.33/include"
  }
}
```

```console
$ xrepo fetch --ldflags openssl
-L/Users/ruki/.xmake/packages/o/openssl/1.1.1/d639b7d6e3244216b403b39df5101abf/lib -lcrypto -lssl
```

```console
$ xrepo fetch --cflags openssl
-I/Users/ruki/.xmake/packages/o/openssl/1.1.1/d639b7d6e3244216b403b39df5101abf/include
```

```console
$ xrepo fetch -p [iphoneos|android] --cflags "zlib 1.2.x"
-I/Users/ruki/.xmake/packages/z/zlib/1.2.11/df72d410e7e14391b1a4375d868a240c/include
```

```console
$ xrepo fetch --cflags --ldflags conan::zlib/1.2.11
-I/Users/ruki/.conan/data/zlib/1.2.11/_/_/package/f74366f76f700cc6e991285892ad7a23c30e6d47/include -L/Users/ruki/.conan/data/zlib/1.2.11/_/_/package/f74366f76f700cc6e991285892ad7a23c30e6d47/lib -lz
```

### å¯¼å‡ºå®‰è£…åçš„åŒ…

xrepo å¯ä»¥å¿«é€Ÿå¯¼å‡ºå·²ç»å®‰è£…åçš„åŒ…ï¼ŒåŒ…æ‹¬å¯¹åº”çš„åº“æ–‡ä»¶ï¼Œå¤´æ–‡ä»¶ç­‰ç­‰ã€‚

```console
$ xrepo export -o /tmp/output zlib
```

### æœç´¢æ”¯æŒçš„åŒ…

```console
$ xrepo search zlib "pcr*"
    zlib:
      -> zlib: A Massively Spiffy Yet Delicately Unobtrusive Compression Library (in xmake-repo)
    pcr*:
      -> pcre2: A Perl Compatible Regular Expressions Library (in xmake-repo)
      -> pcre: A Perl Compatible Regular Expressions Library (in xmake-repo)
```

### æŸ¥çœ‹åŒ…ç¯å¢ƒä¿¡æ¯

```console
$ xrepo env --show luajit
{
  OLDPWD = "/mnt/tbox",
  HOME = "/home/ruki",
  PATH = "/home/ruki/.xmake/packages/l/luajit/2.1.0-beta3/fbac76d823b844f0b91abf3df0a3bc61/bin:/tmp:/tmp/arm-linux-musleabi-cross/bin:~/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
  TERM = "xterm",
  PWD = "/mnt/xmake",
  XMAKE_PROGRAM_DIR = "/mnt/xmake/xmake",
  HOSTNAME = "e6edd61ff1ab",
  LD_LIBRARY_PATH = "/home/ruki/.xmake/packages/l/luajit/2.1.0-beta3/fbac76d823b844f0b91abf3df0a3bc61/lib",
  SHLVL = "1",
  _ = "/mnt/xmake/scripts/xrepo.sh"
}
```

### åŠ è½½æ‰§è¡ŒåŒ…ç¯å¢ƒå¹¶è¿è¡Œå‘½ä»¤

```console
$ xrepo env luajit
LuaJIT 2.1.0-beta3 -- Copyright (C) 2005-2017 Mike Pall. http://luajit.org/
JIT: ON SSE2 SSE3 SSE4.1 BMI2 fold cse dce fwd dse narrow loop abc sink fuse
>
```

```console
$ xrepo env -b "luajit 2.x" luajit
$ xrepo env -p iphoneos -b "zlib,libpng,luajit 2.x" cmake ..
```

### è¿›å…¥åŒ… shell ç¯å¢ƒ

æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæ·»åŠ  xmake.lua æ–‡ä»¶ï¼Œå®šåˆ¶åŒ–ä¸€äº›åŒ…é…ç½®ï¼Œç„¶åè¿›å…¥ç‰¹å®šçš„åŒ… shell ç¯å¢ƒã€‚

```lua
add_requires("zlib 1.2.11")
add_requires("python 3.x", "luajit")
```

```console
$ xrepo env shell
> python --version
> luajit --version
```

### æŸ¥çœ‹åŒ…ä¿¡æ¯

```console
$ xrepo info zlib
The package info of project:
    require(zlib):
      -> description: A Massively Spiffy Yet Delicately Unobtrusive Compression Library
      -> version: 1.2.11
      -> urls:
         -> http://zlib.net/zlib-1.2.11.tar.gz
            -> c3e5e9fdd5004dcb542feda5ee4f0ff0744628baf8ed2dd5d66f8ca1197cb1a1
         -> https://downloads.sourceforge.net/project/libpng/zlib/1.2.11/zlib-1.2.11.tar.gz
            -> c3e5e9fdd5004dcb542feda5ee4f0ff0744628baf8ed2dd5d66f8ca1197cb1a1
      -> repo: xmake-repo https://gitee.com/tboox/xmake-repo.git master
      -> cachedir: /Users/ruki/.xmake/cache/packages/2010/z/zlib/1.2.11
      -> installdir: /Users/ruki/.xmake/packages/z/zlib/1.2.11/d639b7d6e3244216b403b39df5101abf
      -> searchdirs:
      -> searchnames: zlib-1.2.11.tar.gz
      -> fetchinfo: 1.2.11, system
          -> version: 1.2.11
          -> links: z
          -> linkdirs: /usr/local/Cellar/zlib/1.2.11/lib
          -> includedirs: /usr/local/Cellar/zlib/1.2.11/include
      -> platforms: iphoneos, mingw@windows, macosx, mingw@linux,macosx, android@linux,macosx, windows, linux
      -> requires:
         -> plat: macosx
         -> arch: x86_64
         -> configs:
            -> debug: false
            -> vs_runtime: MT
            -> shared: false
      -> configs:
      -> configs (builtin):
         -> debug: Enable debug symbols. (default: false)
         -> shared: Enable shared library. (default: false)
         -> cflags: Set the C compiler flags.
         -> cxflags: Set the C/C++ compiler flags.
         -> cxxflags: Set the C++ compiler flags.
         -> asflags: Set the assembler flags.
         -> vs_runtime: Set vs compiler runtime. (default: MT)
            -> values: {"MT","MD"}
```

### å¸è½½æ‰€æœ‰çš„åŒ…

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ï¼Œæ‰¹é‡å¸è½½åˆ é™¤å·²ç»å®‰è£…çš„åŒ…ï¼Œæ”¯æŒæ¨¡å¼åŒ¹é…ï¼š

```bash
$ xrepo remove --all
$ xrepo remove --all zlib pcr*
```

## è”ç³»æ–¹å¼

* é‚®ç®±ï¼š[waruqi@gmail.com](mailto:waruqi@gmail.com)
* ä¸»é¡µï¼š[xmake.io](https://xmake.io/#/zh-cn/)
* ç¤¾åŒºï¼š[Redditè®ºå›](https://www.reddit.com/r/xmake/)
* èŠå¤©ï¼š[Telegramç¾¤ç»„](https://t.me/tbooxorg), [GitterèŠå¤©å®¤](https://gitter.im/xmake-io/xmake?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)
* æºç ï¼š[Github](https://github.com/xmake-io/xmake), [Gitee](https://gitee.com/tboox/xmake)
* QQç¾¤ï¼š343118190(æŠ€æœ¯æ”¯æŒ), 662147501
* å¾®ä¿¡å…¬ä¼—å·ï¼štboox-os

